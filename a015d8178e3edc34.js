;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="39c46cbf-86c9-6510-f644-21e60f07800a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,104902,e=>{"use strict";var t=e.i(904851),r=e.i(90659),n=e.i(167626),i=e.i(753950),a=e.i(179302),s=e.i(486701),o=e.i(72158),l=e.i(399119),u=e.i(721281),h=e.i(445789),f=e.i(346715),c=e.i(873753),d=e.i(433772),p=function(){function e(r,n,i,a,s,o,l){(0,t._)(this,e),this.type=r,this.value=n,this.from=i,this.hash=a,this.end=s,this.children=o,this.positions=l,this.hashProp=[[c.NodeProp.contextHash,a]]}return(0,r._)(e,[{key:"addChild",value:function(e,t){e.prop(c.NodeProp.contextHash)!=this.hash&&(e=new c.Tree(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}},{key:"toTree",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.end,n=this.children.length-1;return n>=0&&(r=Math.max(r,this.positions[n]+this.children[n].length+this.from)),new c.Tree(e.types[this.type],this.children,this.positions,r-this.from).balance({makeTree:function(e,r,n){return new c.Tree(c.NodeType.none,e,r,n,t.hashProp)}})}}],[{key:"create",value:function(t,r,n,i,a){return new e(t,r,n,i+(i<<8)+t+(r<<4)|0,a,[],[])}}]),e}();(Z=K||(K={}))[Z.Document=1]="Document",Z[Z.CodeBlock=2]="CodeBlock",Z[Z.FencedCode=3]="FencedCode",Z[Z.Blockquote=4]="Blockquote",Z[Z.HorizontalRule=5]="HorizontalRule",Z[Z.BulletList=6]="BulletList",Z[Z.OrderedList=7]="OrderedList",Z[Z.ListItem=8]="ListItem",Z[Z.ATXHeading1=9]="ATXHeading1",Z[Z.ATXHeading2=10]="ATXHeading2",Z[Z.ATXHeading3=11]="ATXHeading3",Z[Z.ATXHeading4=12]="ATXHeading4",Z[Z.ATXHeading5=13]="ATXHeading5",Z[Z.ATXHeading6=14]="ATXHeading6",Z[Z.SetextHeading1=15]="SetextHeading1",Z[Z.SetextHeading2=16]="SetextHeading2",Z[Z.HTMLBlock=17]="HTMLBlock",Z[Z.LinkReference=18]="LinkReference",Z[Z.Paragraph=19]="Paragraph",Z[Z.CommentBlock=20]="CommentBlock",Z[Z.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",Z[Z.Escape=22]="Escape",Z[Z.Entity=23]="Entity",Z[Z.HardBreak=24]="HardBreak",Z[Z.Emphasis=25]="Emphasis",Z[Z.StrongEmphasis=26]="StrongEmphasis",Z[Z.Link=27]="Link",Z[Z.Image=28]="Image",Z[Z.InlineCode=29]="InlineCode",Z[Z.HTMLTag=30]="HTMLTag",Z[Z.Comment=31]="Comment",Z[Z.ProcessingInstruction=32]="ProcessingInstruction",Z[Z.Autolink=33]="Autolink",Z[Z.HeaderMark=34]="HeaderMark",Z[Z.QuoteMark=35]="QuoteMark",Z[Z.ListMark=36]="ListMark",Z[Z.LinkMark=37]="LinkMark",Z[Z.EmphasisMark=38]="EmphasisMark",Z[Z.CodeMark=39]="CodeMark",Z[Z.CodeText=40]="CodeText",Z[Z.CodeInfo=41]="CodeInfo",Z[Z.LinkTitle=42]="LinkTitle",Z[Z.LinkLabel=43]="LinkLabel",Z[Z.URL=44]="URL";var v=function e(r,n){(0,t._)(this,e),this.start=r,this.content=n,this.marks=[],this.parsers=[]},g=function(){function e(){(0,t._)(this,e),this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}return(0,r._)(e,[{key:"forward",value:function(){this.basePos>this.pos&&this.forwardInner()}},{key:"forwardInner",value:function(){var e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}},{key:"skipSpace",value:function(e){return x(this.text,e)}},{key:"reset",value:function(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}},{key:"moveBase",value:function(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}},{key:"moveBaseColumn",value:function(e){this.baseIndent=e,this.basePos=this.findColumn(e)}},{key:"addMarker",value:function(e){this.markers.push(e)}},{key:"countIndent",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t;n<e;n++)r+=9==this.text.charCodeAt(n)?4-r%4:1;return r}},{key:"findColumn",value:function(e){for(var t=0,r=0;t<this.text.length&&r<e;t++)r+=9==this.text.charCodeAt(t)?4-r%4:1;return t}},{key:"scrub",value:function(){if(!this.baseIndent)return this.text;for(var e="",t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}]),e}();function m(e,t,r){if(r.pos==r.text.length||e!=t.block&&r.indent>=t.stack[r.depth+1].value+r.baseIndent)return!0;if(r.indent>=r.baseIndent+4)return!1;var n=(e.type==K.OrderedList?A:T)(r,t,!1);return n>0&&(e.type!=K.BulletList||0>C(r,t,!1))&&r.text.charCodeAt(r.pos+n-1)==e.value}var k=(V={},(0,u._)(V,K.Blockquote,function(e,t,r){return 62==r.next&&(r.markers.push(en(K.QuoteMark,t.lineStart+r.pos,t.lineStart+r.pos+1)),r.moveBase(r.pos+(y(r.text.charCodeAt(r.pos+1))?2:1)),e.end=t.lineStart+r.text.length,!0)}),(0,u._)(V,K.ListItem,function(e,t,r){return(!(r.indent<r.baseIndent+e.value)||!(r.next>-1))&&(r.moveBaseColumn(r.baseIndent+e.value),!0)}),(0,u._)(V,K.OrderedList,m),(0,u._)(V,K.BulletList,m),(0,u._)(V,K.Document,function(){return!0}),V);function y(e){return 32==e||9==e||10==e||13==e}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length&&y(e.charCodeAt(t));)t++;return t}function b(e,t,r){for(;t>r&&y(e.charCodeAt(t-1));)t--;return t}function L(e){if(96!=e.next&&126!=e.next)return -1;for(var t=e.pos+1;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return -1;if(96==e.next){for(var r=t;r<e.text.length;r++)if(96==e.text.charCodeAt(r))return -1}return t}function S(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function C(e,t,r){if(42!=e.next&&45!=e.next&&95!=e.next)return -1;for(var n=1,i=e.pos+1;i<e.text.length;i++){var a=e.text.charCodeAt(i);if(a==e.next)n++;else if(!y(a))return -1}return r&&45==e.next&&B(e)>-1&&e.depth==t.stack.length||n<3?-1:1}function w(e,t){for(var r=e.stack.length-1;r>=0;r--)if(e.stack[r].type==t)return!0;return!1}function T(e,t,r){return(45==e.next||43==e.next||42==e.next)&&(e.pos==e.text.length-1||y(e.text.charCodeAt(e.pos+1)))&&(!r||w(t,K.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function A(e,t,r){for(var n=e.pos,i=e.next;i>=48&&i<=57;){if(++n==e.text.length)return -1;i=e.text.charCodeAt(n)}return n==e.pos||n>e.pos+9||46!=i&&41!=i||n<e.text.length-1&&!y(e.text.charCodeAt(n+1))||r&&!w(t,K.OrderedList)&&(e.skipSpace(n+1)==e.text.length||n>e.pos+1||49!=e.next)?-1:n+1-e.pos}function I(e){if(35!=e.next)return -1;for(var t=e.pos+1;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return -1;var r=t-e.pos;return r>6?-1:r}function B(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return -1;for(var t=e.pos+1;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;for(var r=t;t<e.text.length&&y(e.text.charCodeAt(t));)t++;return t==e.text.length?r:-1}var E=/^[ \t]*$/,M=/-->/,P=/\?>/,H=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,M],[/^\s*<\?/,P],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,E],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,E]];function _(e,t,r){if(60!=e.next)return -1;for(var n=e.text.slice(e.pos),i=0,a=H.length-!!r;i<a;i++)if(H[i][0].test(n))return i;return -1}function N(e,t){var r=e.countIndent(t,e.pos,e.indent),n=e.countIndent(e.skipSpace(t),t,r);return n>=r+5?r+1:n}function O(e,t,r){var n=e.length-1;n>=0&&e[n].to==t&&e[n].type==K.CodeText?e[n].to=r:e.push(en(K.CodeText,t,r))}var R={LinkReference:void 0,IndentedCode:function(e,t){var r=t.baseIndent+4;if(t.indent<r)return!1;var n=t.findColumn(r),i=e.lineStart+n,a=e.lineStart+t.text.length,s=[],o=[];for(O(s,i,a);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){O(o,e.lineStart-1,e.lineStart);var l=!0,u=!1,h=void 0;try{for(var f,c=t.markers[Symbol.iterator]();!(l=(f=c.next()).done);l=!0){var d=f.value;o.push(d)}}catch(e){u=!0,h=e}finally{try{l||null==c.return||c.return()}finally{if(u)throw h}}}else if(t.indent<r)break;else{if(o.length){var p=!0,v=!1,g=void 0;try{for(var m,k=o[Symbol.iterator]();!(p=(m=k.next()).done);p=!0){var y=m.value;y.type==K.CodeText?O(s,y.from,y.to):s.push(y)}}catch(e){v=!0,g=e}finally{try{p||null==k.return||k.return()}finally{if(v)throw g}}o=[]}O(s,e.lineStart-1,e.lineStart);var x=!0,b=!1,L=void 0;try{for(var S,C=t.markers[Symbol.iterator]();!(x=(S=C.next()).done);x=!0){var w=S.value;s.push(w)}}catch(e){b=!0,L=e}finally{try{x||null==C.return||C.return()}finally{if(b)throw L}}a=e.lineStart+t.text.length;var T=e.lineStart+t.findColumn(t.baseIndent+4);T<a&&O(s,T,a)}return o.length&&(o=o.filter(function(e){return e.type!=K.CodeText})).length&&(t.markers=o.concat(t.markers)),e.addNode(e.buffer.writeElements(s,-i).finish(K.CodeBlock,a-i),i),!0},FencedCode:function(e,t){var r=L(t);if(r<0)return!1;var n=e.lineStart+t.pos,i=t.next,a=r-t.pos,s=t.skipSpace(r),o=b(t.text,t.text.length,s),l=[en(K.CodeMark,n,n+a)];s<o&&l.push(en(K.CodeInfo,e.lineStart+s,e.lineStart+o));for(var u=!0;e.nextLine()&&t.depth>=e.stack.length;u=!1){var h=t.pos;if(t.indent-t.baseIndent<4)for(;h<t.text.length&&t.text.charCodeAt(h)==i;)h++;if(h-t.pos>=a&&t.skipSpace(h)==t.text.length){var f=!0,c=!1,d=void 0;try{for(var p,v=t.markers[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;l.push(g)}}catch(e){c=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(c)throw d}}l.push(en(K.CodeMark,e.lineStart+t.pos,e.lineStart+h)),e.nextLine();break}u||O(l,e.lineStart-1,e.lineStart);var m=!0,k=!1,y=void 0;try{for(var x,S=t.markers[Symbol.iterator]();!(m=(x=S.next()).done);m=!0){var C=x.value;l.push(C)}}catch(e){k=!0,y=e}finally{try{m||null==S.return||S.return()}finally{if(k)throw y}}var w=e.lineStart+t.basePos,T=e.lineStart+t.text.length;w<T&&O(l,w,T)}return e.addNode(e.buffer.writeElements(l,-n).finish(K.FencedCode,e.prevLineEnd()-n),n),!0},Blockquote:function(e,t){var r=S(t);return!(r<0)&&(e.startContext(K.Blockquote,t.pos),e.addNode(K.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+r),null)},HorizontalRule:function(e,t){if(0>C(t,e,!1))return!1;var r=e.lineStart+t.pos;return e.nextLine(),e.addNode(K.HorizontalRule,r),!0},BulletList:function(e,t){var r=T(t,e,!1);if(r<0)return!1;e.block.type!=K.BulletList&&e.startContext(K.BulletList,t.basePos,t.next);var n=N(t,t.pos+1);return e.startContext(K.ListItem,t.basePos,n-t.baseIndent),e.addNode(K.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(n),null},OrderedList:function(e,t){var r=A(t,e,!1);if(r<0)return!1;e.block.type!=K.OrderedList&&e.startContext(K.OrderedList,t.basePos,t.text.charCodeAt(t.pos+r-1));var n=N(t,t.pos+r);return e.startContext(K.ListItem,t.basePos,n-t.baseIndent),e.addNode(K.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r),t.moveBaseColumn(n),null},ATXHeading:function(e,t){var r=I(t);if(r<0)return!1;for(var n=t.pos,i=e.lineStart+n,a=b(t.text,t.text.length,n),s=a;s>n&&t.text.charCodeAt(s-1)==t.next;)s--;s!=a&&s!=n&&y(t.text.charCodeAt(s-1))||(s=t.text.length);var o=e.buffer.write(K.HeaderMark,0,r).writeElements(e.parser.parseInline(t.text.slice(n+r+1,s),i+r+1),-i);s<t.text.length&&o.write(K.HeaderMark,s-n,a-n);var l=o.finish(K.ATXHeading1-1+r,t.text.length-n);return e.nextLine(),e.addNode(l,i),!0},HTMLBlock:function(e,t){var r=_(t,e,!1);if(r<0)return!1;for(var n=e.lineStart+t.pos,i=H[r][1],a=[],s=i!=E;!i.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){s=!1;break}var o=!0,l=!1,u=void 0;try{for(var h,f=t.markers[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var c=h.value;a.push(c)}}catch(e){l=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(l)throw u}}}s&&e.nextLine();var d=i==M?K.CommentBlock:i==P?K.ProcessingInstructionBlock:K.HTMLBlock,p=e.prevLineEnd();return e.addNode(e.buffer.writeElements(a,-n).finish(d,p-n),n),!0},SetextHeading:void 0},X=function(){function e(r){(0,t._)(this,e),this.stage=0,this.elts=[],this.pos=0,this.start=r.start,this.advance(r.content)}return(0,r._)(e,[{key:"nextLine",value:function(e,t,r){if(-1==this.stage)return!1;var n=r.content+"\n"+t.scrub(),i=this.advance(n);return i>-1&&i<n.length&&this.complete(e,r,i)}},{key:"finish",value:function(e,t){return(2==this.stage||3==this.stage)&&x(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}},{key:"complete",value:function(e,t,r){return e.addLeafElement(t,en(K.LinkReference,this.start,this.start+r,this.elts)),!0}},{key:"nextStage",value:function(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}},{key:"advance",value:function(e){for(;;)if(-1==this.stage)return -1;else if(0==this.stage){if(!this.nextStage(ep(e,this.pos,this.start,!0)))return -1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(en(K.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(1==this.stage){if(!this.nextStage(ec(e,x(e,this.pos),this.start)))return -1}else{if(2!=this.stage)return D(e,this.pos);var t=x(e,this.pos),r=0;if(t>this.pos){var n=ed(e,t,this.start);if(n){var i=D(e,n.to-this.start);i>0&&(this.nextStage(n),r=i)}}return r||(r=D(e,this.pos)),r>0&&r<e.length?r:-1}}}]),e}();function D(e,t){for(;t<e.length;t++){var r=e.charCodeAt(t);if(10==r)break;if(!y(r))return -1}return t}var z=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"nextLine",value:function(e,t,r){var n=t.depth<e.stack.length?-1:B(t),i=t.next;if(n<0)return!1;var a=en(K.HeaderMark,e.lineStart+t.pos,e.lineStart+n);return e.nextLine(),e.addLeafElement(r,en(61==i?K.SetextHeading1:K.SetextHeading2,r.start,e.prevLineEnd(),(0,f._)(e.parser.parseInline(r.content,r.start)).concat([a]))),!0}},{key:"finish",value:function(){return!1}}]),e}(),$={LinkReference:function(e,t){return 91==t.content.charCodeAt(0)?new X(t):null},SetextHeading:function(){return new z}},F={text:"",end:0},q=function(){function e(r,n,i,a){(0,t._)(this,e),this.parser=r,this.input=n,this.ranges=a,this.line=new g,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=a[a.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=a[0].from,this.block=p.create(K.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new ek(i,n):null,this.readLine()}return(0,r._)(e,[{key:"parsedPos",get:function(){return this.absoluteLineStart}},{key:"advance",value:function(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();for(var e=this.line;;){for(var t=0;;){for(var r=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;t<e.markers.length&&(!r||e.markers[t].from<r.end);){var n=e.markers[t++];this.addNode(n.type,n.from,n.to)}if(!r)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){var i=!0,a=!1,s=void 0;try{for(var o,l=this.parser.blockParsers[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;if(u){var h=u(this,e);if(!1!=h){if(!0==h)return null;e.forward();continue e}}}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}break}var f=new v(this.lineStart+e.pos,e.text.slice(e.pos)),c=!0,d=!1,p=void 0;try{for(var g,m=this.parser.leafBlockParsers[Symbol.iterator]();!(c=(g=m.next()).done);c=!0){var k=g.value;if(k){var y=k(this,f);y&&f.parsers.push(y)}}}catch(e){d=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw p}}t:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){var x=!0,b=!1,L=void 0;try{for(var S,C=this.parser.endLeafBlock[Symbol.iterator]();!(x=(S=C.next()).done);x=!0)if((0,S.value)(this,e,f))break t}catch(e){b=!0,L=e}finally{try{x||null==C.return||C.return()}finally{if(b)throw L}}}var w=!0,T=!1,A=void 0;try{for(var I,B=f.parsers[Symbol.iterator]();!(w=(I=B.next()).done);w=!0)if(I.value.nextLine(this,e,f))return null}catch(e){T=!0,A=e}finally{try{w||null==B.return||B.return()}finally{if(T)throw A}}f.content+="\n"+e.scrub();var E=!0,M=!1,P=void 0;try{for(var H,_=e.markers[Symbol.iterator]();!(E=(H=_.next()).done);E=!0){var N=H.value;f.marks.push(N)}}catch(e){M=!0,P=e}finally{try{E||null==_.return||_.return()}finally{if(M)throw P}}}return this.finishLeaf(f),null}},{key:"stopAt",value:function(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}},{key:"reuseFragment",value:function(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;var t=this.fragments.takeNodes(this);return!!t&&(this.absoluteLineStart+=t,this.lineStart=ey(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++):this.atEnd=!0,this.readLine(),!0)}},{key:"depth",get:function(){return this.stack.length}},{key:"parentType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth-1;return this.parser.nodeSet.types[this.stack[e].type]}},{key:"nextLine",value:function(){return(this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to)?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}},{key:"moveRangeI",value:function(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}},{key:"scanLine",value:function(e){if(F.end=e,e>=this.to)F.text="";else if(F.text=this.lineChunkAt(e),F.end+=F.text.length,this.ranges.length>1)for(var t=this.absoluteLineStart,r=this.rangeI;this.ranges[r].to<F.end;){r++;var n=this.ranges[r].from,i=this.lineChunkAt(n);F.end=n+i.length,F.text=F.text.slice(0,this.ranges[r-1].to-t)+i,t=F.end-F.text.length}return F}},{key:"readLine",value:function(){var e=this.line,t=this.scanLine(this.absoluteLineStart),r=t.text,n=t.end;for(this.absoluteLineEnd=n,e.reset(r);e.depth<this.stack.length;e.depth++){var i=this.stack[e.depth],a=this.parser.skipContextMarkup[i.type];if(!a)throw Error("Unhandled block context "+K[i.type]);if(!a(i,this,e))break;e.forward()}}},{key:"lineChunkAt",value:function(e){var t,r=this.input.chunk(e);if(this.input.lineChunks)t="\n"==r?"":r;else{var n=r.indexOf("\n");t=n<0?r:r.slice(0,n)}return e+t.length>this.to?t.slice(0,this.to-e):t}},{key:"prevLineEnd",value:function(){return this.atEnd?this.lineStart:this.lineStart-1}},{key:"startContext",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.block=p.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}},{key:"startComposite",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.startContext(this.parser.getNodeType(e),t,r)}},{key:"addNode",value:function(e,t,r){"number"==typeof e&&(e=new c.Tree(this.parser.nodeSet.types[e],Y,Y,(null!=r?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}},{key:"addElement",value:function(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}},{key:"addLeafElement",value:function(e,t){this.addNode(this.buffer.writeElements(eg(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}},{key:"finishContext",value:function(){var e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}},{key:"finish",value:function(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}},{key:"addGaps",value:function(e){return this.ranges.length>1?function e(t,r,n,i,a){var s=t[r].to,o=[],l=[],u=n.from+i;function h(e,n){for(;n?e>=s:e>s;){var a=t[r+1].from-s;i+=a,e+=a,s=t[++r].to}}for(var f=n.firstChild;f;f=f.nextSibling){h(f.from+i,!0);var d=f.from+i,p=void 0,v=a.get(f.tree);v?p=v:f.to+i>s?(p=e(t,r,f,i,a),h(f.to+i,!1)):p=f.toTree(),o.push(p),l.push(d-u)}return h(n.to+i,!1),new c.Tree(n.type,o,l,n.to+i-u,n.tree?n.tree.propValues:void 0)}(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}},{key:"finishLeaf",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e.parsers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)if(i.value.finish(this,e))return}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var s=eg(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(s,-e.start).finish(K.Paragraph,e.content.length),e.start)}},{key:"elt",value:function(e,t,r,n){return"string"==typeof e?en(this.parser.getNodeType(e),t,r,n):new er(e,t)}},{key:"buffer",get:function(){return new ee(this.parser.nodeSet)}}]),e}(),j=function(e){function i(e,r,n,a,s,o,u,h,f){(0,t._)(this,i),(v=(0,l._)(this,i)).nodeSet=e,v.blockParsers=r,v.leafBlockParsers=n,v.blockNames=a,v.endLeafBlock=s,v.skipContextMarkup=o,v.inlineParsers=u,v.inlineNames=h,v.wrappers=f,v.nodeTypes=Object.create(null);var c=!0,d=!1,p=void 0;try{for(var v,g,m=e.types[Symbol.iterator]();!(c=(g=m.next()).done);c=!0){var k=g.value;v.nodeTypes[k.name]=k.id}}catch(e){d=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw p}}return v}return(0,h._)(i,e),(0,r._)(i,[{key:"createParse",value:function(e,t,r){var n=new q(this,e,t,r),i=!0,a=!1,s=void 0;try{for(var o,l=this.wrappers[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)n=(0,o.value)(n,e,t,r)}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return n}},{key:"configure",value:function(e){var t=function e(t){if(!Array.isArray(t))return t;if(0==t.length)return null;var r=e(t[0]);if(1==t.length)return r;var n=e(t.slice(1));if(!n||!r)return r||n;var i=function(e,t){return(e||Y).concat(t||Y)},a=r.wrap,s=n.wrap;return{props:i(r.props,n.props),defineNodes:i(r.defineNodes,n.defineNodes),parseBlock:i(r.parseBlock,n.parseBlock),parseInline:i(r.parseInline,n.parseInline),remove:i(r.remove,n.remove),wrap:a?s?function(e,t,r,n){return a(s(e,t,r,n),t,r,n)}:a:s}}(e);if(!t)return this;var r=this.nodeSet,a=this.skipContextMarkup,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),l=this.blockNames.slice(),u=this.inlineParsers.slice(),h=this.inlineNames.slice(),p=this.endLeafBlock.slice(),v=this.wrappers;if(U(t.defineNodes)){a=Object.assign({},a);var g,m,k=r.types.slice(),y=!0,x=!1,b=void 0;try{for(var L,S=t.defineNodes[Symbol.iterator]();!(y=(L=S.next()).done);y=!0)!function(){var e=L.value,t="string"==typeof e?{name:e}:e,r=t.name,i=t.block,s=t.composite,o=t.style;if(!k.some(function(e){return e.name==r})){s&&(a[k.length]=function(e,t,r){return s(t,r,e.value)});var l=k.length,u=s?["Block","BlockContext"]:i?l>=K.ATXHeading1&&l<=K.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;k.push(c.NodeType.define({id:l,name:r,props:u&&[[c.NodeProp.group,u]]})),o&&(m||(m={}),Array.isArray(o)||(0,n._)(o,d.Tag)?m[r]=o:Object.assign(m,o))}}()}catch(e){x=!0,b=e}finally{try{y||null==S.return||S.return()}finally{if(x)throw b}}r=new c.NodeSet(k),m&&(r=r.extend((0,d.styleTags)(m)))}if(U(t.props)&&(r=(g=r).extend.apply(g,(0,f._)(t.props))),U(t.remove)){var C=!0,w=!1,T=void 0;try{for(var A,I=t.remove[Symbol.iterator]();!(C=(A=I.next()).done);C=!0){var B=A.value,E=this.blockNames.indexOf(B),M=this.inlineNames.indexOf(B);E>-1&&(s[E]=o[E]=void 0),M>-1&&(u[M]=void 0)}}catch(e){w=!0,T=e}finally{try{C||null==I.return||I.return()}finally{if(w)throw T}}}if(U(t.parseBlock)){var P=!0,H=!1,_=void 0;try{for(var N,O=t.parseBlock[Symbol.iterator]();!(P=(N=O.next()).done);P=!0){var R=N.value,X=l.indexOf(R.name);if(X>-1)s[X]=R.parse,o[X]=R.leaf;else{var D=R.before?Q(l,R.before):R.after?Q(l,R.after)+1:l.length-1;s.splice(D,0,R.parse),o.splice(D,0,R.leaf),l.splice(D,0,R.name)}R.endLeaf&&p.push(R.endLeaf)}}catch(e){H=!0,_=e}finally{try{P||null==O.return||O.return()}finally{if(H)throw _}}}if(U(t.parseInline)){var z=!0,$=!1,F=void 0;try{for(var q,j=t.parseInline[Symbol.iterator]();!(z=(q=j.next()).done);z=!0){var Z=q.value,V=h.indexOf(Z.name);if(V>-1)u[V]=Z.parse;else{var G=Z.before?Q(h,Z.before):Z.after?Q(h,Z.after)+1:h.length-1;u.splice(G,0,Z.parse),h.splice(G,0,Z.name)}}}catch(e){$=!0,F=e}finally{try{z||null==j.return||j.return()}finally{if($)throw F}}}return t.wrap&&(v=v.concat(t.wrap)),new i(r,s,o,l,p,a,u,h,v)}},{key:"getNodeType",value:function(e){var t=this.nodeTypes[e];if(null==t)throw RangeError("Unknown node type '".concat(e,"'"));return t}},{key:"parseInline",value:function(e,t){var r=new ev(this,e,t);r:for(var n=t;n<r.end;){var i=r.char(n),a=!0,s=!1,o=void 0;try{for(var l,u=this.inlineParsers[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var h=l.value;if(h){var f=h(r,i,n);if(f>=0){n=f;continue r}}}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}n++}return r.resolveMarkers(0)}}]),i}(c.Parser);function U(e){return null!=e&&e.length>0}function Q(e,t){var r=e.indexOf(t);if(r<0)throw RangeError("Position specified relative to unknown parser ".concat(t));return r}for(var Z,K,V,G,J=[c.NodeType.none],W=1;G=K[W];W++)J[W]=c.NodeType.define({id:W,name:G,props:W>=K.Escape?[]:[[c.NodeProp.group,W in k?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==G});var Y=[],ee=function(){function e(r){(0,t._)(this,e),this.nodeSet=r,this.content=[],this.nodes=[]}return(0,r._)(e,[{key:"write",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.content.push(e,t,r,4+4*n),this}},{key:"writeElements",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.writeTo(this,t)}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return this}},{key:"finish",value:function(e,t){return c.Tree.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}]),e}(),et=function(){function e(r,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y;(0,t._)(this,e),this.type=r,this.from=n,this.to=i,this.children=a}return(0,r._)(e,[{key:"writeTo",value:function(e,t){var r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}},{key:"toTree",value:function(e){return new ee(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}]),e}(),er=function(){function e(r,n){(0,t._)(this,e),this.tree=r,this.from=n}return(0,r._)(e,[{key:"to",get:function(){return this.from+this.tree.length}},{key:"type",get:function(){return this.tree.type.id}},{key:"children",get:function(){return Y}},{key:"writeTo",value:function(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}},{key:"toTree",value:function(){return this.tree}}]),e}();function en(e,t,r,n){return new et(e,t,r,n)}var ei={resolve:"Emphasis",mark:"EmphasisMark"},ea={resolve:"Emphasis",mark:"EmphasisMark"},es={},eo={},el=function e(r,n,i,a){(0,t._)(this,e),this.type=r,this.from=n,this.to=i,this.side=a},eu="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",eh=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{eh=RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch(e){}var ef={Escape:function(e,t,r){if(92!=t||r==e.end-1)return -1;for(var n=e.char(r+1),i=0;i<eu.length;i++)if(eu.charCodeAt(i)==n)return e.append(en(K.Escape,r,r+2));return -1},Entity:function(e,t,r){if(38!=t)return -1;var n=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(r+1,r+31));return n?e.append(en(K.Entity,r,r+1+n[0].length)):-1},InlineCode:function(e,t,r){if(96!=t||r&&96==e.char(r-1))return -1;for(var n=r+1;n<e.end&&96==e.char(n);)n++;for(var i=n-r,a=0;n<e.end;n++)if(96==e.char(n)){if(++a==i&&96!=e.char(n+1))return e.append(en(K.InlineCode,r,n+1,[en(K.CodeMark,r,r+i),en(K.CodeMark,n+1-i,n+1)]))}else a=0;return -1},HTMLTag:function(e,t,r){if(60!=t||r==e.end-1)return -1;var n=e.slice(r+1,e.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(n);if(i)return e.append(en(K.Autolink,r,r+1+i[0].length,[en(K.LinkMark,r,r+1),en(K.URL,r+1,r+i[0].length),en(K.LinkMark,r+i[0].length,r+1+i[0].length)]));var a=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(n);if(a)return e.append(en(K.Comment,r,r+1+a[0].length));var s=/^\?[^]*?\?>/.exec(n);if(s)return e.append(en(K.ProcessingInstruction,r,r+1+s[0].length));var o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(n);return o?e.append(en(K.HTMLTag,r,r+1+o[0].length)):-1},Emphasis:function(e,t,r){if(95!=t&&42!=t)return -1;for(var n=r+1;e.char(n)==t;)n++;var i=e.slice(r-1,r),a=e.slice(n,n+1),s=eh.test(i),o=eh.test(a),l=/\s|^$/.test(i),u=/\s|^$/.test(a),h=!u&&(!o||l||s),f=!l&&(!s||u||o);return e.append(new el(95==t?ei:ea,r,n,!!(h&&(42==t||!f||s))|2*!!(f&&(42==t||!h||o))))},HardBreak:function(e,t,r){if(92==t&&10==e.char(r+1))return e.append(en(K.HardBreak,r,r+2));if(32==t){for(var n=r+1;32==e.char(n);)n++;if(10==e.char(n)&&n>=r+2)return e.append(en(K.HardBreak,r,n+1))}return -1},Link:function(e,t,r){return 91==t?e.append(new el(es,r,r+1,1)):-1},Image:function(e,t,r){return 33==t&&91==e.char(r+1)?e.append(new el(eo,r,r+2,1)):-1},LinkEnd:function(e,t,r){if(93!=t)return -1;for(var i=e.parts.length-1;i>=0;i--){var a=e.parts[i];if((0,n._)(a,el)&&(a.type==es||a.type==eo)){if(!a.side||e.skipSpace(a.to)==r&&!/[(\[]/.test(e.slice(r+1,r+2)))return e.parts[i]=null,-1;var s=e.takeContent(i),o=e.parts[i]=function(e,t,r,n,i){var a=e.text,s=e.char(i),o=i;if(t.unshift(en(K.LinkMark,n,n+(r==K.Image?2:1))),t.push(en(K.LinkMark,i-1,i)),40==s){var l,u=e.skipSpace(i+1),h=ec(a,u-e.offset,e.offset);h&&(u=e.skipSpace(h.to))!=h.to&&(l=ed(a,u-e.offset,e.offset))&&(u=e.skipSpace(l.to)),41==e.char(u)&&(t.push(en(K.LinkMark,i,i+1)),o=u+1,h&&t.push(h),l&&t.push(l),t.push(en(K.LinkMark,u,o)))}else if(91==s){var f=ep(a,i-e.offset,e.offset,!1);f&&(t.push(f),o=f.to)}return en(r,n,o,t)}(e,s,a.type==es?K.Link:K.Image,a.from,r+1);if(a.type==es)for(var l=0;l<i;l++){var u=e.parts[l];(0,n._)(u,el)&&u.type==es&&(u.side=0)}return o.to}}return -1}};function ec(e,t,r){if(60==e.charCodeAt(t)){for(var n=t+1;n<e.length;n++){var i=e.charCodeAt(n);if(62==i)return en(K.URL,t+r,n+1+r);if(60==i||10==i)return!1}return null}for(var a=0,s=t,o=!1;s<e.length;s++){var l=e.charCodeAt(s);if(y(l))break;if(o)o=!1;else if(40==l)a++;else if(41==l){if(!a)break;a--}else 92==l&&(o=!0)}return s>t?en(K.URL,t+r,s+r):s==e.length&&null}function ed(e,t,r){var n=e.charCodeAt(t);if(39!=n&&34!=n&&40!=n)return!1;for(var i=40==n?41:n,a=t+1,s=!1;a<e.length;a++){var o=e.charCodeAt(a);if(s)s=!1;else{if(o==i)return en(K.LinkTitle,t+r,a+1+r);92==o&&(s=!0)}}return null}function ep(e,t,r,n){for(var i=!1,a=t+1,s=Math.min(e.length,a+999);a<s;a++){var o=e.charCodeAt(a);if(i)i=!1;else{if(93==o)return!n&&en(K.LinkLabel,t+r,a+1+r);if(n&&!y(o)&&(n=!1),91==o)return!1;92==o&&(i=!0)}}return null}var ev=function(){function e(r,n,i){(0,t._)(this,e),this.parser=r,this.text=n,this.offset=i,this.parts=[]}return(0,r._)(e,[{key:"char",value:function(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}},{key:"end",get:function(){return this.offset+this.text.length}},{key:"slice",value:function(e,t){return this.text.slice(e-this.offset,t-this.offset)}},{key:"append",value:function(e){return this.parts.push(e),e.to}},{key:"addDelimiter",value:function(e,t,r,n,i){return this.append(new el(e,t,r,!!n|2*!!i))}},{key:"hasOpenLink",get:function(){for(var e=this.parts.length-1;e>=0;e--){var t=this.parts[e];if((0,n._)(t,el)&&(t.type==es||t.type==eo))return!0}return!1}},{key:"addElement",value:function(e){return this.append(e)}},{key:"resolveMarkers",value:function(e){for(var t=e;t<this.parts.length;t++){var r=this.parts[t];if((0,n._)(r,el)&&r.type.resolve&&2&r.side){for(var i=r.type==ei||r.type==ea,a=r.to-r.from,s=void 0,o=t-1;o>=e;o--){var l=this.parts[o];if((0,n._)(l,el)&&1&l.side&&l.type==r.type&&!(i&&(1&r.side||2&l.side)&&(l.to-l.from+a)%3==0&&((l.to-l.from)%3||a%3))){s=l;break}}if(s){var u=r.type.resolve,h=[],f=s.from,c=r.to;if(i){var d=Math.min(2,s.to-s.from,a);f=s.to-d,c=r.from+d,u=1==d?"Emphasis":"StrongEmphasis"}s.type.mark&&h.push(this.elt(s.type.mark,f,s.to));for(var p=o+1;p<t;p++)(0,n._)(this.parts[p],et)&&h.push(this.parts[p]),this.parts[p]=null;r.type.mark&&h.push(this.elt(r.type.mark,r.from,c));var v=this.elt(u,f,c,h);this.parts[o]=i&&s.from!=f?new el(s.type,s.from,f,s.side):null,(this.parts[t]=i&&r.to!=c?new el(r.type,c,r.to,r.side):null)?this.parts.splice(t,0,v):this.parts[t]=v}}}for(var g=[],m=e;m<this.parts.length;m++){var k=this.parts[m];(0,n._)(k,et)&&g.push(k)}return g}},{key:"findOpeningDelimiter",value:function(e){for(var t=this.parts.length-1;t>=0;t--){var r=this.parts[t];if((0,n._)(r,el)&&r.type==e)return t}return null}},{key:"takeContent",value:function(e){var t=this.resolveMarkers(e);return this.parts.length=e,t}},{key:"skipSpace",value:function(e){return x(this.text,e-this.offset)+this.offset}},{key:"elt",value:function(e,t,r,n){return"string"==typeof e?en(this.parser.getNodeType(e),t,r,n):new er(e,t)}}]),e}();function eg(e,t){if(!t.length)return e;if(!e.length)return t;var r=e.slice(),i=0,a=!0,s=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){for(var h=l.value;i<r.length&&r[i].to<h.to;)i++;if(i<r.length&&r[i].from<h.from){var f=r[i];(0,n._)(f,et)&&(r[i]=new et(f.type,f.from,f.to,eg(f.children,[h])))}else r.splice(i++,0,h)}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}return r}var em=[K.CodeBlock,K.ListItem,K.OrderedList,K.BulletList],ek=function(){function e(r,n){(0,t._)(this,e),this.fragments=r,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,r.length&&(this.fragment=r[this.i++])}return(0,r._)(e,[{key:"nextFragment",value:function(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}},{key:"moveTo",value:function(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){for(var r=this.fragment.to;r>0&&"\n"!=this.input.read(r-1,r);)r--;this.fragmentEnd=r?r-1:0}var n=this.cursor;n||(n=this.cursor=this.fragment.tree.cursor()).firstChild();for(var i=e+this.fragment.offset;n.to<=i;)if(!n.parent())return!1;for(;;){if(n.from>=i)return this.fragment.from<=t;if(!n.childAfter(i))return!1}}},{key:"matches",value:function(e){var t=this.cursor.tree;return t&&t.prop(c.NodeProp.contextHash)==e}},{key:"takeNodes",value:function(e){for(var t=this.cursor,r=this.fragment.offset,n=this.fragmentEnd-!!this.fragment.openEnd,i=e.absoluteLineStart,a=i,s=e.block.children.length,o=a,l=s;;){if(t.to-r>n){if(t.type.isAnonymous&&t.firstChild())continue;break}var u=ey(t.from-r,e.ranges);if(t.to-r<=e.ranges[e.rangeI].to)e.addNode(t.tree,u);else{var h=new c.Tree(e.parser.nodeSet.types[K.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(h,t.tree),e.addNode(h,u)}if(t.type.is("Block")&&(0>em.indexOf(t.type.id)?(a=t.to-r,s=e.block.children.length):(a=o,s=l,o=t.to-r,l=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return a-i}}]),e}();function ey(e,t){for(var r=e,n=1;n<t.length;n++){var i=t[n-1].to,a=t[n].from;i<e&&(r-=a-i)}return r}var ex=(0,d.styleTags)({"Blockquote/...":d.tags.quote,HorizontalRule:d.tags.contentSeparator,"ATXHeading1/... SetextHeading1/...":d.tags.heading1,"ATXHeading2/... SetextHeading2/...":d.tags.heading2,"ATXHeading3/...":d.tags.heading3,"ATXHeading4/...":d.tags.heading4,"ATXHeading5/...":d.tags.heading5,"ATXHeading6/...":d.tags.heading6,"Comment CommentBlock":d.tags.comment,Escape:d.tags.escape,Entity:d.tags.character,"Emphasis/...":d.tags.emphasis,"StrongEmphasis/...":d.tags.strong,"Link/... Image/...":d.tags.link,"OrderedList/... BulletList/...":d.tags.list,"BlockQuote/...":d.tags.quote,"InlineCode CodeText":d.tags.monospace,"URL Autolink":d.tags.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":d.tags.processingInstruction,"CodeInfo LinkLabel":d.tags.labelName,LinkTitle:d.tags.string,Paragraph:d.tags.content}),eb=new j(new c.NodeSet(J).extend(ex),Object.keys(R).map(function(e){return R[e]}),Object.keys(R).map(function(e){return $[e]}),Object.keys(R),[function(e,t){return I(t)>=0},function(e,t){return L(t)>=0},function(e,t){return S(t)>=0},function(e,t){return T(t,e,!0)>=0},function(e,t){return A(t,e,!0)>=0},function(e,t){return C(t,e,!0)>=0},function(e,t){return _(t,e,!0)>=0}],k,Object.keys(ef).map(function(e){return ef[e]}),Object.keys(ef),[]),eL={resolve:"Strikethrough",mark:"StrikethroughMark"},eS={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":d.tags.strikethrough}},{name:"StrikethroughMark",style:d.tags.processingInstruction}],parseInline:[{name:"Strikethrough",parse:function(e,t,r){if(126!=t||126!=e.char(r+1)||126==e.char(r+2))return -1;var n=e.slice(r-1,r),i=e.slice(r+2,r+3),a=/\s|^$/.test(n),s=/\s|^$/.test(i),o=eh.test(n),l=eh.test(i);return e.addDelimiter(eL,r,r+2,!s&&(!l||a||o),!a&&(!o||s||l))},after:"Emphasis"}]};function eC(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0,s=!0,o=-1,l=-1,u=!1,h=function(){n.push(e.elt("TableCell",i+o,i+l,e.parser.parseInline(t.slice(o,l),i+o)))},f=r;f<t.length;f++){var c=t.charCodeAt(f);124!=c||u?(u||32!=c&&9!=c)&&(o<0&&(o=f),l=f+1):((!s||o>-1)&&a++,s=!1,n&&(o>-1&&h(),n.push(e.elt("TableDelimiter",f+i,f+i+1))),o=l=-1),u=!u&&92==c}return o>-1&&(a++,n&&h()),a}function ew(e,t){for(var r=t;r<e.length;r++){var n=e.charCodeAt(r);if(124==n)return!0;92==n&&r++}return!1}var eT=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/,eA=function(){function e(){(0,t._)(this,e),this.rows=null}return(0,r._)(e,[{key:"nextLine",value:function(e,t,r){if(null==this.rows){if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&eT.test(n=t.text.slice(t.pos))){var n,i=[];eC(e,r.content,0,i,r.start)==eC(e,n,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,i),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){var a=[];eC(e,t.text,t.pos,a,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,a))}return!1}},{key:"finish",value:function(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}]),e}(),eI={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":d.tags.heading}},"TableRow",{name:"TableCell",style:d.tags.content},{name:"TableDelimiter",style:d.tags.processingInstruction}],parseBlock:[{name:"Table",leaf:function(e,t){return ew(t.content,0)?new eA:null},endLeaf:function(e,t,r){if(r.parsers.some(function(e){return(0,n._)(e,eA)})||!ew(t.text,t.basePos))return!1;var i=e.scanLine(e.absoluteLineEnd+1).text;return eT.test(i)&&eC(e,t.text,t.basePos)==eC(e,i,t.basePos)},before:"SetextHeading"}]},eB=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"nextLine",value:function(){return!1}},{key:"finish",value:function(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3)].concat((0,f._)(e.parser.parseInline(t.content.slice(3),t.start+3))))),!0}}]),e}(),eE={defineNodes:[{name:"Task",block:!0,style:d.tags.list},{name:"TaskMarker",style:d.tags.atom}],parseBlock:[{name:"TaskList",leaf:function(e,t){return/^\[[ xX]\][ \t]/.test(t.content)&&"ListItem"==e.parentType().name?new eB:null},after:"SetextHeading"}]},eM=RegExp("(www\\.)|(https?:\\/\\/)|([\\w.+-]+@)|(mailto:|xmpp:)","gy"),eP=RegExp("[\\w-]+(\\.[\\w-]+)+(\\/[^\\s<]*)?","gy"),eH=/[\w-]+\.[\w-]+($|\/)/,e_=RegExp("[\\w.+-]+@[\\w-]+(\\.[\\w.-]+)+","gy"),eN=RegExp("\\/[a-zA-Z\\d@.]+","gy");function eO(e,t,r,n){for(var i=0,a=t;a<r;a++)e[a]==n&&i++;return i}function eR(e,t){e_.lastIndex=t;var r=e_.exec(e);if(!r)return -1;var n=r[0][r[0].length-1];return"_"==n||"-"==n?-1:t+r[0].length-("."==n)}var eX=[eI,eE,eS,{parseInline:[{name:"Autolink",parse:function(e,t,r){var n=r-e.offset;eM.lastIndex=n;var i=eM.exec(e.text),a=-1;if(!i)return -1;if(i[1]||i[2]){if((a=function(e,t){eP.lastIndex=t;var r=eP.exec(e);if(!r||eH.exec(r[0])[0].indexOf("_")>-1)return -1;for(var n=t+r[0].length;;){var i=e[n-1],a=void 0;if(/[?!.,:*_~]/.test(i)||")"==i&&eO(e,t,n,")")>eO(e,t,n,"("))n--;else if(";"==i&&(a=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(e.slice(t,n))))n=t+a.index;else break}return n}(e.text,n+i[0].length))>-1&&e.hasOpenLink){var s=/([^\[\]]|\[[^\]]*\])*/.exec(e.text.slice(n,a));a=n+s[0].length}}else i[3]?a=eR(e.text,n):(a=eR(e.text,n+i[0].length))>-1&&"xmpp:"==i[0]&&(eN.lastIndex=a,(i=eN.exec(e.text))&&(a=i.index+i[0].length));return a<0?-1:(e.addElement(e.elt("URL",r,a+e.offset)),a+e.offset)}}]}];function eD(e,t,r){return function(n,i,a){if(i!=e||n.char(a+1)==e)return -1;for(var s=[n.elt(r,a,a+1)],o=a+1;o<n.end;o++){var l=n.char(o);if(l==e)return n.addElement(n.elt(t,a,o+1,s.concat(n.elt(r,o,o+1))));if(92==l&&s.push(n.elt("Escape",o,o+++2)),y(l))break}return -1}}var ez={defineNodes:[{name:"Superscript",style:d.tags.special(d.tags.content)},{name:"SuperscriptMark",style:d.tags.processingInstruction}],parseInline:[{name:"Superscript",parse:eD(94,"Superscript","SuperscriptMark")}]},e$={defineNodes:[{name:"Subscript",style:d.tags.special(d.tags.content)},{name:"SubscriptMark",style:d.tags.processingInstruction}],parseInline:[{name:"Subscript",parse:eD(126,"Subscript","SubscriptMark")}]},eF={defineNodes:[{name:"Emoji",style:d.tags.character}],parseInline:[{name:"Emoji",parse:function(e,t,r){var n;return 58==t&&(n=/^[a-zA-Z_0-9]+:/.exec(e.slice(r+1,e.end)))?e.addElement(e.elt("Emoji",r,r+1+n[0].length)):-1}}]},eq=e.i(350068),ej=(0,s.defineLanguageFacet)({commentTokens:{block:{open:"<!--",close:"-->"}}}),eU=new c.NodeProp,eQ=eb.configure({props:[s.foldNodeProp.add(function(e){var t;return!e.is("Block")||e.is("Document")||null!=eZ(e)||"OrderedList"==(t=e).name||"BulletList"==t.name?void 0:function(e,t){return{from:t.doc.lineAt(e.from).to,to:e.to}}}),eU.add(eZ),s.indentNodeProp.add({Document:function(){return null}}),s.languageDataProp.add({Document:ej})]});function eZ(e){var t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}var eK=s.foldService.of(function(e,t,r){for(var n=(0,s.syntaxTree)(e).resolveInner(r,-1);n&&!(n.from<t);n=n.parent){var i=n.type.prop(eU);if(null!=i){var a=function(e,t){for(var r=e;;){var n=r.nextSibling,i=void 0;if(!n||null!=(i=eZ(n.type))&&i<=t)break;r=n}return r.to}(n,i);if(a>r)return{from:r,to:a}}}return null});function eV(e){return new s.Language(ej,e,[eK],"markdown")}var eG=eV(eQ),eJ=eV(eQ.configure([eX,e$,ez,eF,{props:[s.foldNodeProp.add({Table:function(e,t){return{from:t.doc.lineAt(e.from).to,to:e.to}}})]}])),eW=function(){function e(r,n,i,a,s,o,l){(0,t._)(this,e),this.node=r,this.from=n,this.to=i,this.spaceBefore=a,this.spaceAfter=s,this.type=o,this.item=l}return(0,r._)(e,[{key:"blank",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;r.length<e;)r+=" ";return r}for(var n=this.to-this.from-r.length-this.spaceAfter.length;n>0;n--)r+=" ";return r+(t?this.spaceAfter:"")}},{key:"marker",value:function(e,t){var r="OrderedList"==this.node.name?String(+e0(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}]),e}();function eY(e,t){for(var r=[],n=e;n&&"Document"!=n.name;n=n.parent)("ListItem"==n.name||"Blockquote"==n.name||"FencedCode"==n.name)&&r.push(n);for(var i=[],a=r.length-1;a>=0;a--){var s=r[a],o=void 0,l=t.lineAt(s.from),u=s.from-l.from;if("FencedCode"==s.name)i.push(new eW(s,u,u,"","","",null));else if("Blockquote"==s.name&&(o=/^ *>( ?)/.exec(l.text.slice(u))))i.push(new eW(s,u,u+o[0].length,"",o[1],">",null));else if("ListItem"==s.name&&"OrderedList"==s.parent.name&&(o=/^( *)\d+([.)])( *)/.exec(l.text.slice(u)))){var h=o[3],f=o[0].length;h.length>=4&&(h=h.slice(0,h.length-4),f-=4),i.push(new eW(s.parent,u,u+f,o[1],h,o[2],s))}else if("ListItem"==s.name&&"BulletList"==s.parent.name&&(o=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(l.text.slice(u)))){var c=o[4],d=o[0].length;c.length>4&&(c=c.slice(0,c.length-4),d-=4);var p=o[2];o[3]&&(p+=o[3].replace(/[xX]/," ")),i.push(new eW(s.parent,u,u+d,o[1],c,p,s))}}return i}function e0(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function e1(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=-1,a=e;;){if("ListItem"==a.name){var s=e0(a,t),o=+s[2];if(i>=0){if(o!=i+1)return;r.push({from:a.from+s[1].length,to:a.from+s[0].length,insert:String(i+2+n)})}i=o}var l=a.nextSibling;if(!l)break;a=l}}function e2(e,t){var r=/^[ \t]*/.exec(e)[0].length;if(!r||"	"!=t.facet(s.indentUnit))return e;for(var n=(0,i.countColumn)(e,4,r),a="",o=n;o>0;)o>=4?(a+="	",o-=4):(a+=" ",o--);return a+e.slice(r)}var e4=function(e){var t=e.state,r=e.dispatch,n=(0,s.syntaxTree)(t),a=t.doc,o=null,l=t.changeByRange(function(e){if(!e.empty||!eJ.isActiveAt(t,e.from))return o={range:e};for(var r=e.from,s=a.lineAt(r),l=eY(n.resolveInner(r,-1),a);l.length&&l[l.length-1].from>r-s.from;)l.pop();if(!l.length)return o={range:e};var u=l[l.length-1];if(u.to-u.spaceAfter.length>r-s.from)return o={range:e};var h=r>=u.to-u.spaceAfter.length&&!/\S/.test(s.text.slice(u.to));if(u.item&&h){var f=u.node.firstChild,c=u.node.getChild("ListItem","ListItem");if(f.to>=r||c&&c.to<r||s.from>0&&!/[^\s>]/.test(a.lineAt(s.from-1).text)){var d,p=l.length>1?l[l.length-2]:null,v="";p&&p.item?(d=s.from+p.from,v=p.marker(a,1)):d=s.from+(p?p.to:0);var g=[{from:d,to:r,insert:v}];return"OrderedList"==u.node.name&&e1(u.item,a,g,-2),p&&"OrderedList"==p.node.name&&e1(p.item,a,g),{range:i.EditorSelection.cursor(d+v.length),changes:g}}var m=e9(l,t,s);return{range:i.EditorSelection.cursor(r+m.length+1),changes:{from:s.from,insert:m+t.lineBreak}}}if("Blockquote"==u.node.name&&h&&s.from){var k=a.lineAt(s.from-1),y=/>\s*$/.exec(k.text);if(y&&y.index==u.from){var x=t.changes([{from:k.from+y.index,to:k.to},{from:s.from+u.from,to:s.to}]);return{range:e.map(x),changes:x}}}var b=[];"OrderedList"==u.node.name&&e1(u.item,a,b);var L=u.item&&u.item.from<s.from,S="";if(!L||/^[\s\d.)\-+*>]*/.exec(s.text)[0].length>=u.to)for(var C=0,w=l.length-1;C<=w;C++)S+=C!=w||L?l[C].blank(C<w?(0,i.countColumn)(s.text,4,l[C+1].from)-S.length:null):l[C].marker(a,1);for(var T=r;T>s.from&&/\s/.test(s.text.charAt(T-s.from-1));)T--;return S=e2(S,t),function(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;var r=e.firstChild,n=e.getChild("ListItem","ListItem");if(!n)return!1;var i=t.lineAt(r.to),a=t.lineAt(n.from),s=/^[\s>]*$/.test(i.text);return i.number+ +!s<a.number}(u.node,t.doc)&&(S=e9(l,t,s)+t.lineBreak+S),b.push({from:T,to:r,insert:t.lineBreak+S}),{range:i.EditorSelection.cursor(T+S.length+1),changes:b}});return!o&&(r(t.update(l,{scrollIntoView:!0,userEvent:"input"})),!0)};function e3(e){return"QuoteMark"==e.name||"ListMark"==e.name}function e9(e,t,r){for(var n="",a=0,s=e.length-2;a<=s;a++)n+=e[a].blank(a<s?(0,i.countColumn)(r.text,4,e[a+1].from)-n.length:null,a<s);return e2(n,t)}var e6=function(e){var t=e.state,r=e.dispatch,n=(0,s.syntaxTree)(t),a=null,o=t.changeByRange(function(e){var r=e.from,s=t.doc;if(e.empty&&eJ.isActiveAt(t,e.from)){var o=s.lineAt(r),l=eY(function(e,t){var r,n=e.resolveInner(t,-1),i=t;for(e3(n)&&(i=n.from,n=n.parent);r=n.childBefore(i);)if(e3(r))i=r.from;else if("OrderedList"==r.name||"BulletList"==r.name)i=(n=r.lastChild).to;else break;return n}(n,r),s);if(l.length){var u=l[l.length-1],h=u.to-u.spaceAfter.length+ +!!u.spaceAfter;if(r-o.from>h&&!/\S/.test(o.text.slice(h,r-o.from)))return{range:i.EditorSelection.cursor(o.from+h),changes:{from:o.from+h,to:r}};if(r-o.from==h&&(!u.item||o.from<=u.item.from||!/\S/.test(o.text.slice(0,u.to)))){var f=o.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(o.text.slice(u.from,u.to))){var c=u.blank((0,i.countColumn)(o.text,4,u.to)-(0,i.countColumn)(o.text,4,u.from));return f==o.from&&(c=e2(c,t)),{range:i.EditorSelection.cursor(f+c.length),changes:{from:f,to:o.from+u.to,insert:c}}}if(f<r)return{range:i.EditorSelection.cursor(f),changes:{from:f,to:r}}}}}return a={range:e}});return!a&&(r(t.update(o,{scrollIntoView:!0,userEvent:"delete"})),!0)},e5=[{key:"Enter",run:e4},{key:"Backspace",run:e6}],e7=(0,eq.html)({matchClosingTags:!1});function e8(){var e,t,r,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=l.codeLanguages,h=l.defaultCodeLanguage,f=l.addKeymap,d=l.base,p=(void 0===d?eG:d).parser,v=l.completeHTMLTags;if(!(0,n._)(p,j))throw RangeError("Base parser provided to `markdown` should be a Markdown parser");var g,m=l.extensions?[l.extensions]:[],k=[e7.support];(0,n._)(h,s.LanguageSupport)?(k.push(h.support),g=h.language):h&&(g=h);var y=u||g?(e=g,function(t){if(t&&u){var r=null;if(t=/\S*/.exec(t)[0],r="function"==typeof u?u(t):s.LanguageDescription.matchLanguageName(u,t,!0),(0,n._)(r,s.LanguageDescription))return r.support?r.support.language.parser:s.ParseContext.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}):void 0;m.push((r=(t={codeParser:y,htmlParser:e7.language.parser}).codeParser,o=t.htmlParser,{wrap:(0,c.parseMixed)(function(e,t){var n=e.type.id;if(r&&(n==K.CodeBlock||n==K.FencedCode)){var i="";if(n==K.FencedCode){var a=e.node.getChild(K.CodeInfo);a&&(i=t.read(a.from,a.to))}var s=r(i);if(s)return{parser:s,overlay:function(e){return e.type.id==K.CodeText}}}else if(o&&(n==K.HTMLBlock||n==K.HTMLTag))return{parser:o,overlay:function(e,t,r){for(var n=[],i=e.firstChild,a=t;;i=i.nextSibling){var s=i?i.from:r;if(s>a&&n.push({from:a,to:s}),!i)break;a=i.to}return n}(e.node,e.from,e.to)};return null})})),(void 0===f||f)&&k.push(i.Prec.high(a.keymap.of(e5)));var x=eV(p.configure(m));return(void 0===v||v)&&k.push(x.data.of({autocomplete:te})),new s.LanguageSupport(x,k)}function te(e){var t=e.state,r=e.pos,n=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(r-25,r));if(!n)return null;for(var a=(0,s.syntaxTree)(t).resolveInner(r,-1);a&&!a.type.isTop;){if("CodeBlock"==a.name||"FencedCode"==a.name||"ProcessingInstructionBlock"==a.name||"CommentBlock"==a.name||"Link"==a.name||"Image"==a.name)return null;a=a.parent}return{from:r-n[0].length,to:r,options:function(){if(tt)return tt;var e=(0,eq.htmlCompletionSource)(new o.CompletionContext(i.EditorState.create({extensions:e7}),0,!0));return tt=e?e.options:[]}(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}var tt=null;e.s(["commonmarkLanguage",()=>eG,"deleteMarkupBackward",()=>e6,"insertNewlineContinueMarkup",()=>e4,"markdown",()=>e8,"markdownKeymap",()=>e5,"markdownLanguage",()=>eJ],104902)}]);

//# debugId=39c46cbf-86c9-6510-f644-21e60f07800a
//# sourceMappingURL=0e132a8ac01c30f8.js.map